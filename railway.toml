[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"
# Build context is the mys-relay directory
# Note: If Railway runs from parent directory, adjust dockerfilePath accordingly

[deploy]
startCommand = "relay"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables that should be set in Railway dashboard:
# - DATABASE_URL (PostgreSQL connection string)
# - REDIS_URL (Redis connection string)
# - REDPANDA_BROKERS (Redpanda/Kafka brokers)
# - REDPANDA_CONSUMER_GROUP (Consumer group name)
# - API_PORT (Port for API server, Railway sets PORT automatically)
# - APNS_BUNDLE_ID, APNS_KEY_ID, APNS_TEAM_ID, APNS_KEY_PATH (for APNs)
# - FCM_SERVER_KEY (for FCM)
# - RESEND_API_KEY, RESEND_FROM_EMAIL (for email delivery)

